(window.webpackJsonpfitness=window.webpackJsonpfitness||[]).push([[0],{158:function(e,t,n){e.exports=n.p+"static/media/fit_logo.37e6fc94.png"},352:function(e,t,n){e.exports=n(736)},357:function(e,t,n){},358:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},359:function(e,t,n){},372:function(e,t){},374:function(e,t){},390:function(e,t){},392:function(e,t){},652:function(e,t){},736:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),l=n(24),s=n.n(l),o=(n(357),n(358),n(359),n(149)),r=n(150),c=n(160),d=n(151),u=n(161),g=n(111),h=n(351),p=n(325),m=n(77),v=n(79),f=n(329),E=n(741),y=n(348),b=(n(733),n(158)),w=n.n(b),k=(n(734),{decrypt:!0}),N={encrypt:!0},S=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={weightLogs:[],loading:!0,run:!1,inputDate:"",inputUnits:"lb",inputWeight:"",stepIndex:0,steps:[{target:".dash-header-text",content:"Welcome to the Fitness Stack weight tracker! This app allows you to securely track and share your weight loss achievements with friends."},{target:".dash-entry",content:"New weight logs can be added from the bottom input here."},{target:".dash-add",content:"Adding an entry appends it to your existing ledger, managed by Blockstack's decentralized and permissioned network."},{target:".dash-delete",content:"Deleting the table is irreversible and remove all entries from your ledger. Only use this if you are certain you want to start over!"},{target:".dash-chart",content:"We'll automatically plot your data over time as you add weight entries."},{target:".dash-logout",content:"Logging out won't remove your data. It'll be saved so your can see it, save it, or make a new entry, the next time you visit!"}]},n.getLogFile=function(){return"logs.json"},n.handleChange=function(e){n.setState(Object(p.a)({},e.target.name,e.target.value))},n.handleJoyrideCallback=function(e){var t=e.action,a=e.index,i=e.status,l=e.type;[v.b.STEP_AFTER,v.b.TARGET_NOT_FOUND].includes(l)?n.setState({stepIndex:a+(t===v.a.PREV?-1:1)}):[v.c.FINISHED,v.c.SKIPPED].includes(i)&&n.setState({run:!1}),console.groupCollapsed(l),console.log(e),console.groupEnd()},n.handleChange=n.handleChange.bind(Object(m.a)(n)),n.handleDateChange=n.handleDateChange.bind(Object(m.a)(n)),n.saveWeight=n.saveWeight.bind(Object(m.a)(n)),n.deleteList=n.deleteList.bind(Object(m.a)(n)),n}return Object(u.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.listWeight()}},{key:"handleDateChange",value:function(e){this.setState({inputDate:e})}},{key:"listWeight",value:function(){var e=this,t=this.props,n=t.userSession,a=t.profile,i=new g.Person(a);console.log("profile",i),n.getFile(e.getLogFile(),k).then(function(t){var n=JSON.parse(t||"[]");console.log("fileContents of listWeight",t),console.log("weights in listWeight",n),e.setState({weightLogs:n,loading:!1,run:0===n.length})})}},{key:"saveWeight",value:function(e){e.preventDefault();var t=this,n=this.props.userSession,a=this.state,i=a.inputDate,l=a.inputWeight,s=a.inputUnits;console.log(this.state),i&&l&&s?(l=parseInt(l),isNaN(l)||l<=0?alert("Input weight must be positive"):n.getFile(t.getLogFile(),k).then(function(e){var a=JSON.parse(e||"[]");console.log("old weights in saveWeight",a);var o=[].concat(Object(h.a)(a),[{weight:l,date:i,units:s}]);console.log("weight to be saved",o),n.putFile(t.getLogFile(),JSON.stringify(o),N).then(function(){t.setState({weightLogs:o}),t.clearInputs()})})):alert("Weight, date, and units must all be specified to save record.")}},{key:"clearInputs",value:function(){this.setState({inputDate:"",inputWeight:"",inputUnits:"lb"})}},{key:"deleteList",value:function(e){var t=this,n=this.props.userSession;e.preventDefault(),n.deleteFile(this.getLogFile()).then(function(){t.listWeight()})}},{key:"deleteLastItem",value:function(){var e=this.props.userSession,t=this;e.getFile(t.getLogFile(),k).then(function(n){var a=JSON.parse(n||"[]");a.length>1?(a.pop(),console.log("after deleting last item",a),e.putFile(t.getLogFile(),JSON.stringify(a),N).then(function(){t.listWeight(e)})):1===a.length&&(document.getElementById("weights").style.display="none",document.getElementById("weight-body").innerHTML="",e.putFile(t.getLogFile(),[],{decrypt:!1}).then(function(){t.listWeight(e)}))})}},{key:"render",value:function(){this.props.profile;var e=this.state,t=e.weightLogs,n=e.run,a=e.stepIndex,l=e.inputDate,s=e.inputWeight,o=e.inputUnits,r=e.steps;t=t.map(function(e){return e.date=new Date(e.date).toISOString().split("T")[0],e});var c=[],d="";if(t&&t.length>0){var u=[],g=0;d=t[0].units,t.forEach(function(e){var t=e.weight,n=e.date,a=e.units;a!=d&&("kg"===a?t*=2.2:"lb"===a&&(t/=2.2)),(t=parseInt(t))&&n&&(u.push([n,t]),g=Math.max(g,t))}),c={name:"Weight (".concat(d,")"),data:u,max:g}}return i.a.createElement("div",null,i.a.createElement(v.d,{callback:this.handleJoyrideCallback,continuous:!0,getHelpers:this.getHelpers,run:n,scrollToFirstStep:!0,showProgress:!0,showSkipButton:!0,stepIndex:a,steps:r,styles:{options:{zIndex:1e4}}}),i.a.createElement("div",{id:"crypto-container"},i.a.createElement("div",{className:"panel-landing",id:"crypto"},i.a.createElement("div",{className:"dash-header"},i.a.createElement("img",{className:"dash-logo",src:w.a}),i.a.createElement("span",{className:"dash-header-text"},"Weight Tracker")),i.a.createElement("div",{className:"dash-chart"},i.a.createElement(y.a,{legend:!1,min:0,max:c.max,data:c.data,messages:{empty:"Enter your first data point below!"},ytitle:d,xtitle:"Date"})),t&&t.length>0&&i.a.createElement("div",{id:"weights"},i.a.createElement("table",{className:"table dash-table"},i.a.createElement("thead",{className:"thead-dark"},i.a.createElement("tr",null,i.a.createElement("th",null,"Weight"),i.a.createElement("th",null,"Date"),i.a.createElement("th",null,"Units"))),i.a.createElement("tbody",null,t.map(function(e,t){return i.a.createElement("tr",{key:t},i.a.createElement("td",null,e.weight),i.a.createElement("td",null,e.date),i.a.createElement("td",null,e.units))})))),i.a.createElement("hr",null),i.a.createElement("p",{className:"dash-add-prompt"},"-",i.a.createElement("br",null),"Add a new weight recording:"),i.a.createElement("table",{className:"weight-table dash-entry"},i.a.createElement("tbody",{id:"weight-body"},i.a.createElement("tr",null,i.a.createElement("td",null,i.a.createElement("div",{className:"input-group mb-3"},i.a.createElement(E.a.Control,{value:s,onChange:this.handleChange,name:"inputWeight",type:"number",placeholder:"Enter weight"}))),i.a.createElement("td",null,i.a.createElement("div",{className:"input-group mb-3"},i.a.createElement(f.a,{className:"date-picker",placeholderText:"Enter date",selected:l,onChange:this.handleDateChange}))),i.a.createElement("td",null,i.a.createElement("div",{className:"input-group input-units-group mb-3"},i.a.createElement(E.a.Group,{controlId:"exampleForm.ControlSelect1"},i.a.createElement(E.a.Control,{as:"select",name:"inputUnits",value:o,componentClass:"select",onChange:this.handleChange},i.a.createElement("option",null,"lb"),i.a.createElement("option",null,"kg")))))))))),i.a.createElement("div",{id:"deleteWeights"},i.a.createElement("div",{className:"btn btn-primary dash-add",id:"save-weight",onClick:this.saveWeight},"Add weight log"),"\xa0",i.a.createElement("div",{className:"btn btn-primary dash-delete",id:"delete-button",onClick:this.deleteList},"Delete all")))}}]),t}(a.Component),C=new g.AppConfig(["store_write","publish_data","email"]),I=new g.UserSession({appConfig:C}),W=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return(n=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i)))).state={profile:null},n}return Object(u.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){if(I.isUserSignedIn()){var e=I.loadUserData().profile;this.setState({profile:e}),this.showProfile(e)}else I.isSignInPending()&&I.handlePendingSignIn().then(function(e){window.location=window.location.origin})}},{key:"showProfile",value:function(e){document.getElementById("section-1").style.display="none",document.getElementById("section-2").style.display="block",document.getElementById("site-wrapper-inner").style.verticalAlign="top"}},{key:"signin",value:function(e){e.preventDefault(),I.redirectToSignIn()}},{key:"signout",value:function(e){e.preventDefault(),I.signUserOut(),window.location=window.location.origin}},{key:"render",value:function(){var e=this.state.profile;return i.a.createElement("div",null,i.a.createElement("div",{className:"panel-welcome hide",id:"section-2"},i.a.createElement("p",{className:"lead"},i.a.createElement("a",{href:"#",className:"btn btn-primary btn-lg dash-logout",id:"signout-button",onClick:this.signout},"Logout"))),i.a.createElement("div",{className:"site-wrapper"},i.a.createElement("div",{className:"site-wrapper-inner",id:"site-wrapper-inner"},i.a.createElement("div",{className:"panel-landing",id:"section-1"},i.a.createElement("img",{className:"landing-logo",src:w.a}),i.a.createElement("p",{className:"lead"},i.a.createElement("a",{href:"#",className:"btn btn-primary btn-lg",id:"signin-button",onClick:this.signin},"Sign In with Blockstack"))),!e&&i.a.createElement("div",null,i.a.createElement("img",{src:"https://i.giphy.com/media/26BRq9PYFLeJl3WLu/giphy.webp"}),i.a.createElement("p",{className:"landing-slogan-text"},"Share and record your weight loss progress, backed by ",i.a.createElement("a",{href:"https://blockstack.org",target:"_blank"},"Blockstack")," decentralized storage.")),i.a.createElement("div",null,e&&i.a.createElement(S,{profile:e,userSession:I})))))}}]),t}(a.Component);var O=function(){return i.a.createElement("div",{className:"App"},i.a.createElement(W,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[352,1,2]]]);
//# sourceMappingURL=main.4b1fdb14.chunk.js.map